name: ipsec_skillet
label: IPSEC Config Skillet
description: Skillet for configuring IKE Gateway and IPSEC tunnel
type: panos
labels:
    collection: Unknown
variables: []
snippets:
-   name: update-server-803094
    xpath: /config/devices/entry[@name="localhost.localdomain"]/deviceconfig/system
    element: <update-server>updates.paloaltonetworks.com</update-server>
-   name: update-schedule-344707
    xpath: /config/devices/entry[@name="localhost.localdomain"]/deviceconfig/system
    element: |-
        <update-schedule>
          <threats>
            <recurring>
              <weekly>
                <day-of-week>thursday</day-of-week>
                <at>11:00</at>
                <action>download-only</action>
              </weekly>
            </recurring>
          </threats>
        </update-schedule>
-   name: timezone-512286
    xpath: /config/devices/entry[@name="localhost.localdomain"]/deviceconfig/system
    element: <timezone>US/Pacific</timezone>
-   name: service-726500
    xpath: /config/devices/entry[@name="localhost.localdomain"]/deviceconfig/system
    element: |-
        <service>
          <disable-telnet>yes</disable-telnet>
          <disable-http>yes</disable-http>
        </service>
-   name: hostname-964850
    xpath: /config/devices/entry[@name="localhost.localdomain"]/deviceconfig/system
    element: <hostname>t131_Prisma-Access-NGFW-1</hostname>
-   name: ip-address-210629
    xpath: /config/devices/entry[@name="localhost.localdomain"]/deviceconfig/system
    element: <ip-address>192.168.128.101</ip-address>
-   name: netmask-137220
    xpath: /config/devices/entry[@name="localhost.localdomain"]/deviceconfig/system
    element: <netmask>255.255.255.0</netmask>
-   name: default-gateway-801059
    xpath: /config/devices/entry[@name="localhost.localdomain"]/deviceconfig/system
    element: <default-gateway>192.168.128.1</default-gateway>
-   name: primary-811415
    xpath: /config/devices/entry[@name="localhost.localdomain"]/deviceconfig/system/dns-setting/servers
    element: <primary>4.2.2.2</primary>
-   name: interface-management-profile-816793
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/profiles
    element: |-
        <interface-management-profile>
          <entry name="ping-only">
            <ping>yes</ping>
          </entry>
        </interface-management-profile>
-   name: entry-185007
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/interface/ethernet
    element: |-
        <entry name="ethernet1/1">
          <layer3>
            <ndp-proxy>
              <enabled>no</enabled>
            </ndp-proxy>
            <sdwan-link-settings>
              <upstream-nat>
                <enable>no</enable>
                <static-ip/>
              </upstream-nat>
              <enable>no</enable>
            </sdwan-link-settings>
            <ip>
              <entry name="10.70.221.146/24"/>
            </ip>
            <lldp>
              <enable>no</enable>
            </lldp>
            <interface-management-profile>ping-only</interface-management-profile>
          </layer3>
        </entry>
-   name: entry-787644
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/interface/ethernet
    element: |-
        <entry name="ethernet1/2">
          <layer3>
            <ndp-proxy>
              <enabled>no</enabled>
            </ndp-proxy>
            <sdwan-link-settings>
              <upstream-nat>
                <enable>no</enable>
                <static-ip/>
              </upstream-nat>
              <enable>no</enable>
            </sdwan-link-settings>
            <ip>
              <entry name="172.31.0.37/27"/>
            </ip>
            <lldp>
              <enable>no</enable>
            </lldp>
            <interface-management-profile>ping-only</interface-management-profile>
          </layer3>
        </entry>
-   name: tunnel-455683
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/interface
    element: |-
        <tunnel>
          <units>
            <entry name="tunnel.123">
              <comment>tunnel-from-1-2</comment>
            </entry>
          </units>
        </tunnel>
-   name: gateway-4662
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/ike
    element: |-
        <gateway>
          <entry name="gw-to-2">
            <authentication>
              <pre-shared-key>
                <key>-AQ==IB8jxOT5t2N4quYAvwmOtD1c4fI=8dTKnz2HiAtg/m5OOnV66g8y/66Ejfl7I+J1WFwiiS3gMVfx+DZ/gyR2x+b3fs7E</key>
              </pre-shared-key>
            </authentication>
            <protocol>
              <ikev1>
                <dpd>
                  <enable>yes</enable>
                </dpd>
              </ikev1>
              <ikev2>
                <dpd>
                  <enable>yes</enable>
                </dpd>
              </ikev2>
            </protocol>
            <local-address>
              <ip>10.70.221.146/24</ip>
              <interface>ethernet1/1</interface>
            </local-address>
            <protocol-common>
              <nat-traversal>
                <enable>no</enable>
              </nat-traversal>
              <fragmentation>
                <enable>no</enable>
              </fragmentation>
            </protocol-common>
            <peer-address>
              <ip>10.70.221.192</ip>
            </peer-address>
            <comment>gateway to ngfw2</comment>
          </entry>
        </gateway>
-   name: tunnel-466695
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network
    element: |-
        <tunnel>
          <ipsec>
            <entry name="tunnel-to-2">
              <auto-key>
                <ike-gateway>
                  <entry name="gw-to-2"/>
                </ike-gateway>
              </auto-key>
              <tunnel-monitor>
                <enable>no</enable>
              </tunnel-monitor>
              <tunnel-interface>tunnel.123</tunnel-interface>
              <comment>tunnel to ngfw 2</comment>
              <disabled>no</disabled>
            </entry>
          </ipsec>
        </tunnel>
-   name: routing-options-164837
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/virtual-router/entry[@name="default"]/protocol/bgp
    element: |-
        <routing-options>
          <graceful-restart>
            <enable>yes</enable>
          </graceful-restart>
        </routing-options>
-   name: rip-340980
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/virtual-router/entry[@name="default"]/protocol
    element: |-
        <rip>
          <enable>no</enable>
        </rip>
-   name: ospf-395975
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/virtual-router/entry[@name="default"]/protocol
    element: |-
        <ospf>
          <enable>no</enable>
        </ospf>
-   name: ospfv3-433852
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/virtual-router/entry[@name="default"]/protocol
    element: |-
        <ospfv3>
          <enable>no</enable>
        </ospfv3>
-   name: interface-792448
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/virtual-router/entry[@name="default"]
    element: |-
        <interface>
          <member>ethernet1/1</member>
          <member>ethernet1/2</member>
          <member>tunnel.123</member>
        </interface>
-   name: ecmp-550118
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/virtual-router/entry[@name="default"]
    element: |-
        <ecmp>
          <algorithm>
            <ip-modulo/>
          </algorithm>
        </ecmp>
-   name: routing-table-631221
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/virtual-router/entry[@name="default"]
    element: |-
        <routing-table>
          <ip>
            <static-route>
              <entry name="route-to-2">
                <bfd>
                  <profile>None</profile>
                </bfd>
                <interface>tunnel.123</interface>
                <metric>10</metric>
                <destination>172.31.0.64/27</destination>
                <route-table>
                  <unicast/>
                </route-table>
              </entry>
              <entry name="fw dg">
                <nexthop>
                  <ip-address>10.70.221.192</ip-address>
                </nexthop>
                <bfd>
                  <profile>None</profile>
                </bfd>
                <interface>ethernet1/1</interface>
                <metric>10</metric>
                <destination>0.0.0.0/0</destination>
                <route-table>
                  <unicast/>
                </route-table>
              </entry>
            </static-route>
          </ip>
        </routing-table>
-   name: entry-610309
    xpath: /config/devices/entry[@name="localhost.localdomain"]/vsys/entry[@name="vsys1"]/zone
    element: |-
        <entry name="internet">
          <network>
            <layer3>
              <member>ethernet1/1</member>
            </layer3>
          </network>
        </entry>
-   name: entry-486157
    xpath: /config/devices/entry[@name="localhost.localdomain"]/vsys/entry[@name="vsys1"]/zone
    element: |-
        <entry name="user">
          <network>
            <layer3>
              <member>ethernet1/2</member>
              <member>tunnel.123</member>
            </layer3>
          </network>
        </entry>
-   name: password-complexity-677059
    xpath: /config/mgt-config
    element: |-
        <password-complexity>
          <enabled>yes</enabled>
          <minimum-length>8</minimum-length>
        </password-complexity>
-   name: class-bandwidth-type-25711
    xpath: /config/devices/entry[@name="localhost.localdomain"]/network/qos/profile/entry[@name="default"]
    element: |-
        <class-bandwidth-type>
          <mbps>
            <class>
              <entry name="class1">
                <priority>real-time</priority>
              </entry>
              <entry name="class2">
                <priority>high</priority>
              </entry>
              <entry name="class3">
                <priority>high</priority>
              </entry>
              <entry name="class4">
                <priority>medium</priority>
              </entry>
              <entry name="class5">
                <priority>medium</priority>
              </entry>
              <entry name="class6">
                <priority>low</priority>
              </entry>
              <entry name="class7">
                <priority>low</priority>
              </entry>
              <entry name="class8">
                <priority>low</priority>
              </entry>
            </class>
          </mbps>
        </class-bandwidth-type>
-   name: setting-990758
    xpath: /config/devices/entry[@name="localhost.localdomain"]/deviceconfig
    element: |-
        <setting>
          <config>
            <rematch>yes</rematch>
          </config>
          <management>
            <hostname-type-in-syslog>FQDN</hostname-type-in-syslog>
            <initcfg>
              <type>
                <static/>
              </type>
              <ip-address>192.168.128.101</ip-address>
              <default-gateway>192.168.128.1</default-gateway>
              <netmask>255.255.255.0</netmask>
              <hostname>t131_Prisma-Access-NGFW-1</hostname>
              <dns-primary>4.2.2.2</dns-primary>
            </initcfg>
          </management>
          <auto-mac-detect>yes</auto-mac-detect>
        </setting>
-   name: user-id-collector-141438
    xpath: /config/devices/entry[@name="localhost.localdomain"]/vsys/entry[@name="vsys1"]
    element: |-
        <user-id-collector>
          <setting/>
        </user-id-collector>
-   name: import-151229
    xpath: /config/devices/entry[@name="localhost.localdomain"]/vsys/entry[@name="vsys1"]
    element: |-
        <import>
          <network>
            <interface>
              <member>ethernet1/1</member>
              <member>ethernet1/2</member>
              <member>tunnel.123</member>
            </interface>
          </network>
        </import>
-   name: security-721225
    xpath: /config/devices/entry[@name="localhost.localdomain"]/vsys/entry[@name="vsys1"]/rulebase
    element: |-
        <security>
          <rules>
            <entry name="allow-all">
              <to>
                <member>any</member>
              </to>
              <from>
                <member>any</member>
              </from>
              <source>
                <member>any</member>
              </source>
              <destination>
                <member>any</member>
              </destination>
              <source-user>
                <member>any</member>
              </source-user>
              <category>
                <member>any</member>
              </category>
              <application>
                <member>any</member>
              </application>
              <service>
                <member>any</member>
              </service>
              <source-hip>
                <member>any</member>
              </source-hip>
              <destination-hip>
                <member>any</member>
              </destination-hip>
              <action>allow</action>
              <disabled>yes</disabled>
            </entry>
            <entry name="users-to-web">
              <to>
                <member>internet</member>
              </to>
              <from>
                <member>user</member>
              </from>
              <source>
                <member>any</member>
              </source>
              <destination>
                <member>any</member>
              </destination>
              <source-user>
                <member>any</member>
              </source-user>
              <category>
                <member>any</member>
              </category>
              <application>
                <member>any</member>
              </application>
              <service>
                <member>application-default</member>
              </service>
              <source-hip>
                <member>any</member>
              </source-hip>
              <destination-hip>
                <member>any</member>
              </destination-hip>
              <action>allow</action>
            </entry>
          </rules>
        </security>
